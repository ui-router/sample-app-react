var C=Object.defineProperty;var g=(a,e,s)=>e in a?C(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var c=(a,e,s)=>g(a,typeof e!="symbol"?e+"":e,s);import{l as d,C as h}from"./lodash-T9rU2TFC.js";import{r as o,P as l,j as t,U as y,a as i,b as N,i as m}from"./index-CZ4gKJcq.js";class x extends o.Component{constructor(e){super(e)}render(){let e=t.jsx(i,{to:".new",children:t.jsx("a",{children:t.jsxs("button",{className:"btn btn-primary",children:[t.jsx("i",{className:"fa fa-pencil"}),t.jsx("span",{children:"New Contact"})]})})}),s=this.props.contacts.map((n,r)=>t.jsx("li",{children:t.jsx(y,{class:"selected",children:t.jsx(i,{to:".contact",params:{contactId:n._id},children:t.jsx("a",{href:"asd",children:n.name.first+" "+n.name.last})})})},r));return t.jsx("div",{className:this.props.className,children:t.jsxs("ul",{className:"selectlist list-unstyled flex nogrow",children:[t.jsx("li",{children:e}),t.jsx("li",{children:"Â "}),s]})})}}c(x,"propTypes",{contacts:l.arrayOf(l.object)});class j extends o.Component{constructor(e){super(e)}render(){let{contacts:e}=this.props;return t.jsxs("div",{className:"my-contacts flex-h",children:[t.jsx(x,{contacts:e,className:"flex nogrow"}),t.jsx(N,{children:t.jsx("h4",{style:{margin:"1em 2em"},children:"Select a contact"})})]})}}c(j,"propTypes",{contacts:l.arrayOf(l.object)});class u extends o.Component{render(){let{contact:e}=this.props;return t.jsxs("div",{className:"flex-h",children:[t.jsxs("div",{className:"details",children:[t.jsx("h3",{children:e.name.first+" "+e.name.last}),t.jsxs("div",{children:[t.jsx("label",{children:"Company"}),t.jsx("div",{children:e.company})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Age"}),t.jsx("div",{children:e.age})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Phone"}),t.jsx("div",{children:e.phone})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Email"}),t.jsx("div",{children:e.email})]}),t.jsxs("div",{className:"flex-h",children:[t.jsx("label",{children:"Address"}),t.jsxs("div",{children:[e.address.street,t.jsx("br",{}),e.address.city+", "+e.address.state+" "+e.address.zip]})]})]}),t.jsx("div",{className:"flex nogrow",children:t.jsx("img",{src:e.picture})})]})}}c(u,"propTypes",{contact:l.object});class b extends o.Component{render(){let{contact:e}=this.props,s=t.jsx(i,{to:"mymessages.compose",params:{message:{to:e.email}},children:t.jsxs("button",{className:"btn btn-primary",children:[t.jsx("i",{className:"fa fa-envelope"}),t.jsx("span",{children:"Message"})]})}),n=t.jsx(i,{to:".edit",children:t.jsxs("button",{className:"btn btn-primary",children:[t.jsx("i",{className:"fa fa-pencil"}),t.jsx("span",{children:"Edit Contact"})]})});return t.jsxs("div",{className:"contact",children:[t.jsx(u,{contact:e}),s," ",n]})}}c(b,"propTypes",{contact:l.object});const S=[{label:"First",path:"name.first"},{label:"Last",path:"name.last"},{label:"Company",path:"company"},{label:"Age",path:"age"},{label:"Phone",path:"phone"},{label:"Email",path:"email"},{label:"Street",path:"address.street"},{label:"City",path:"address.city"},{label:"State",path:"address.state"},{label:"Zip",path:"address.zip"},{label:"Image",path:"picture"}];class v extends o.Component{constructor(){super(...arguments);c(this,"handleChangeFor",s=>{const{contact:n,onContactChange:r}=this.props;return f=>{r(d.set({...n},s,f.target.value))}})}render(){let{contact:s}=this.props,n=S.map(r=>t.jsxs("div",{children:[t.jsx("label",{children:r.label}),t.jsx("input",{type:"text",value:d.get(s,r.path),onChange:this.handleChangeFor(r.path)})]},r.path));return t.jsx("div",{className:"details",children:n})}}c(v,"propTypes",{contact:l.object,onContactChange:l.func});class p extends o.Component{constructor(s){super(s);c(this,"uiCanExit",s=>this.canExit||d.isEqual(this.state.contact,this.props.contact)?!0:m.confirm("You have unsaved changes to this contact.","Navigate away and lose changes?"));c(this,"handleChangeContact",s=>{this.setState({contact:s})});c(this,"save",()=>{const{stateService:s}=this.props.transition.router;h.save(this.state.contact).then(()=>this.canExit=!0).then(()=>s.go("^",null,{reload:!0}))});c(this,"remove",()=>{let{contact:s}=this.state;const{stateService:n}=this.props.transition.router;m.confirm(`Delete contact: ${s.name.first} ${s.name.last}`).then(()=>h.remove(s)).then(()=>this.canExit=!0).then(()=>n.go("^.^",null,{reload:!0}))});this.canExit=!1,this.state={contact:d.cloneDeep(this.props.contact)}}render(){let{contact:s}=this.state;return t.jsxs("div",{className:"contact",children:[t.jsx(v,{contact:s,onContactChange:this.handleChangeContact}),t.jsx("hr",{}),t.jsxs("div",{children:[t.jsx(i,{to:"^",children:t.jsxs("button",{className:"btn btn-primary",children:[t.jsx("i",{className:"fa fa-close"}),t.jsx("span",{children:"Cancel"})]})}),t.jsxs("button",{className:"btn btn-primary",onClick:this.save,children:[t.jsx("i",{className:"fa fa-save"}),t.jsx("span",{children:"Save"})]}),t.jsxs("button",{className:"btn btn-primary",onClick:this.remove,children:[t.jsx("i",{className:"fa fa-close"}),t.jsx("span",{children:"Delete"})]})]})]})}}c(p,"propTypes",{contact:l.object});const w={parent:"app",name:"contacts",url:"/contacts",resolve:[{token:"contacts",resolveFn:()=>h.all()}],data:{requiresAuth:!0},component:j},E={name:"contacts.contact",url:"/:contactId",resolve:[{token:"contact",deps:["$transition$"],resolveFn:a=>h.get(a.params().contactId)}],component:b},I={name:"contacts.contact.edit",url:"/edit",views:{"^.^.$default":{component:p}}},T={name:"contacts.new",url:"/new",component:p},k=[w,E,I,T];export{k as states};
